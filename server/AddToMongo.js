import mongoose from 'mongoose';
import Recipe from './src/models/recipeModel.js'; // נתיב למודל שלך

import dotenv from 'dotenv';

dotenv.config();
// קובץ JSON של המתכונים
const recipesData = 

[
    {
      "title": "קינוח פנקוטה חלבי",
      "ingredients": [
        "500 מ\"ל שמנת מתוקה",
        "100 גרם סוכר",
        "1 מקל וניל",
        "7 גרם ג'לטין",
        "30 מ\"ל מים",
        "300 גרם תותים טריים"
      ],
      "instructions": [
        "משרים את הג'לטין במים קרים למשך 5 דקות.",
        "מחממים בסיר קטן את השמנת, הסוכר ומקל הוניל עד לסף רתיחה.",
        "מוציאים מהאש ומסננים את התערובת.",
        "מוסיפים את הג'לטין לתערובת החמה ומערבבים עד להמסה מלאה.",
        "יוצקים לכוסות הגשה ומעבירים למקרר ל-4 שעות לפחות.",
        "מגישים עם תותים טריים."
      ],
      "preparationTime": 20,
      "cookingTime": 10,
      "servings": 6,
      "imageUrl": "https://example.com/panna-cotta.jpg",
      "difficulty": "Easy",
      "categories": {
        "mainCategory": "Dairy",
        "subCategory": "Desserts"
      },
      "description": "פנקוטה איטלקית קלאסית עם שמנת מתוקה, עדינה ומפנקת. מוגשת עם רוטב תותים טריים.",
      "favorites": false
    },
    {
      "title": "פסטה אלפרדו עם פטריות",
      "ingredients": [
        "500 גרם ספגטי",
        "100 גרם חמאה",
        "250 מ\"ל שמנת מתוקה",
        "100 גרם גבינת פרמזן מגוררת",
        "300 גרם פטריות שמפיניון",
        "4 שיני שום",
        "מלח ופלפל שחור לפי הטעם",
        "1 כף שמן זית"
      ],
      "instructions": [
        "מבשלים את הפסטה במים מלוחים לפי הוראות היצרן.",
        "בינתיים, מחממים שמן זית במחבת גדולה ומטגנים את הפטריות עד להזהבה.",
        "מוסיפים את השום הקצוץ ומטגנים עוד דקה.",
        "מוסיפים את החמאה והשמנת ומבשלים על אש נמוכה כ-3 דקות.",
        "מוסיפים את גבינת הפרמזן ומערבבים עד להמסה.",
        "מסננים את הפסטה ומוסיפים אותה לרוטב, מערבבים היטב.",
        "מתבלים במלח ופלפל לפי הטעם ומגישים מיד."
      ],
      "preparationTime": 15,
      "cookingTime": 25,
      "servings": 4,
      "imageUrl": "https://example.com/alfredo-pasta.jpg",
      "difficulty": "Medium",
      "categories": {
        "mainCategory": "Dairy",
        "subCategory": "Dishes"
      },
      "description": "פסטה ברוטב אלפרדו עשיר וקרמי עם פטריות טריות, מנה קלאסית איטלקית שכולם אוהבים.",
      "favorites": true
    },
    {
      "title": "סטייק אנטריקוט ברוטב יין אדום",
      "ingredients": [
        "4 סטייקים אנטריקוט (כ-250 גרם כל אחד)",
        "2 כפות שמן זית",
        "4 שיני שום",
        "1 כף רוזמרין טרי קצוץ",
        "1 כף טימין טרי קצוץ",
        "250 מ\"ל יין אדום יבש",
        "100 מ\"ל ציר בקר",
        "50 גרם חמאה",
        "מלח ופלפל שחור גרוס"
      ],
      "instructions": [
        "מוציאים את הסטייקים מהמקרר כשעה לפני הבישול ומתבלים במלח ופלפל.",
        "מחממים מחבת כבדה על אש גבוהה ומוסיפים שמן זית.",
        "צורבים את הסטייקים כ-3-4 דקות מכל צד למדיום-רייר.",
        "מוציאים את הסטייקים מהמחבת ומניחים בצד לנוח.",
        "באותה מחבת, מוסיפים שום, רוזמרין וטימין ומטגנים כ-30 שניות.",
        "יוצקים את היין האדום ומגרדים את תחתית המחבת.",
        "מוסיפים ציר בקר ומבשלים עד שהרוטב מצטמצם בכמחצית.",
        "מורידים מהאש, מוסיפים חמאה ומערבבים עד להמסה.",
        "יוצקים את הרוטב על הסטייקים ומגישים מיד."
      ],
      "preparationTime": 70,
      "cookingTime": 20,
      "servings": 4,
      "imageUrl": "https://example.com/steak.jpg",
      "difficulty": "Medium",
      "categories": {
        "mainCategory": "Meat",
        "subCategory": "Dishes"
      },
      "description": "סטייק אנטריקוט עסיסי בליווי רוטב יין אדום עשיר, מנה חגיגית ומרשימה.",
      "favorites": true
    },
    {
      "title": "מרק בשר עם ירקות שורש",
      "ingredients": [
        "500 גרם בשר בקר לבישול איטי (צלעות או כתף)",
        "2 בצלים",
        "3 גזרים",
        "2 שורשי סלרי",
        "2 תפוחי אדמה",
        "2 ליטר מים",
        "2 עלי דפנה",
        "4 גרגירי פלפל אנגלי",
        "צרור עשבי תיבול (פטרוזיליה, כוסברה, טימין)",
        "מלח ופלפל שחור"
      ],
      "instructions": [
        "חותכים את הבשר לקוביות גדולות ומשחימים בסיר גדול עד להזהבה מכל הצדדים.",
        "מוסיפים את הבצל הקצוץ ומטגנים עד לשקיפות.",
        "חותכים את כל הירקות לקוביות גדולות ומוסיפים לסיר.",
        "מוסיפים את התבלינים ועשבי התיבול.",
        "יוצקים מים עד לכיסוי מלא של המרכיבים.",
        "מביאים לרתיחה, מנמיכים את האש ומבשלים על אש נמוכה במשך 2-3 שעות.",
        "מסירים את הקצף שעולה למעלה מדי פעם.",
        "מתבלים במלח ופלפל לפי הטעם ומגישים חם."
      ],
      "preparationTime": 30,
      "cookingTime": 180,
      "servings": 6,
      "imageUrl": "https://example.com/beef-soup.jpg",
      "difficulty": "Easy",
      "categories": {
        "mainCategory": "Meat",
        "subCategory": "Soups"
      },
      "description": "מרק בשר ביתי ומחמם עם ירקות שורש, מושלם לימי החורף הקרים.",
      "favorites": false
    },
    {
      "title": "עוגת שוקולד פרווה",
      "ingredients": [
        "2 כוסות קמח",
        "1.5 כוסות סוכר",
        "3/4 כוס אבקת קקאו",
        "2 כפיות אבקת אפייה",
        "1.5 כפיות סודה לשתייה",
        "1 כפית מלח",
        "2 ביצים",
        "1 כוס חלב סויה",
        "1/2 כוס שמן צמחי",
        "2 כפיות תמצית וניל",
        "1 כוס מים רותחים"
      ],
      "instructions": [
        "מחממים תנור ל-180 מעלות ומשמנים תבנית אפייה.",
        "מערבבים בקערה את כל החומרים היבשים.",
        "מוסיפים ביצים, חלב סויה, שמן ווניל ומערבבים היטב.",
        "מוסיפים בהדרגה את המים הרותחים ומערבבים עד לקבלת בלילה אחידה.",
        "יוצקים את הבלילה לתבנית ואופים למשך 35-40 דקות או עד שקיסם הננעץ במרכז העוגה יוצא נקי.",
        "מצננים לחלוטין לפני ההגשה."
      ],
      "preparationTime": 20,
      "cookingTime": 40,
      "servings": 8,
      "imageUrl": "https://example.com/chocolate-cake.jpg",
      "difficulty": "Easy",
      "categories": {
        "mainCategory": "Fur",
        "subCategory": "Desserts"
      },
      "description": "עוגת שוקולד פרווה עסיסית ורכה, מושלמת לכל אירוח או סתם לפינוק משפחתי.",
      "favorites": true
    },
    {
      "title": "מרק עדשים אדומות",
      "ingredients": [
        "2 כוסות עדשים אדומות",
        "1 בצל גדול קצוץ",
        "2 גזרים חתוכים לקוביות",
        "3 שיני שום כתושות",
        "1 כף פפריקה מתוקה",
        "1 כפית כמון",
        "1/2 כפית כורכום",
        "1.5 ליטר מים או ציר ירקות",
        "מיץ מחצי לימון",
        "1/4 כוס כוסברה טרייה קצוצה",
        "2 כפות שמן זית",
        "מלח ופלפל שחור"
      ],
      "instructions": [
        "שוטפים את העדשים האדומות תחת מים זורמים.",
        "מחממים שמן זית בסיר גדול ומטגנים את הבצל עד לשקיפות.",
        "מוסיפים את הגזר והשום ומטגנים עוד 2 דקות.",
        "מוסיפים את התבלינים ומערבבים.",
        "מוסיפים את העדשים והמים או הציר, מביאים לרתיחה.",
        "מנמיכים את האש ומבשלים כ-30 דקות עד שהעדשים מתרככות לגמרי.",
        "טוחנים את המרק בעזרת בלנדר מוט או במעבד מזון עד לקבלת מרקם חלק.",
        "מוסיפים מיץ לימון, מלח ופלפל לפי הטעם.",
        "מגישים עם כוסברה טרייה ומעט שמן זית."
      ],
      "preparationTime": 15,
      "cookingTime": 40,
      "servings": 6,
      "imageUrl": "https://example.com/lentil-soup.jpg",
      "difficulty": "Easy",
      "categories": {
        "mainCategory": "Fur",
        "subCategory": "Soups"
      },
      "description": "מרק עדשים אדומות קטיפתי עם תבלינים מזרחיים, עשיר בחלבון וטעים במיוחד.",
      "favorites": false
    },
    {
      "title": "סלט קינואה וירקות צלויים",
      "ingredients": [
        "2 כוסות קינואה",
        "4 כוסות מים",
        "1 חציל",
        "2 פלפלים אדומים",
        "1 פלפל צהוב",
        "1 בצל סגול",
        "2 קישואים",
        "1/2 כוס עלי רוקט",
        "1/4 כוס נענע טרייה",
        "1/2 כוס אגוזי מלך קצוצים",
        "1/4 כוס שמן זית",
        "מיץ מלימון אחד",
        "1 כף דבש או סילאן",
        "מלח ופלפל שחור"
      ],
      "instructions": [
        "שוטפים את הקינואה היטב ומבשלים במים עם מעט מלח למשך כ-15 דקות.",
        "מסננים ומצננים את הקינואה.",
        "חותכים את הירקות לקוביות בינוניות, מתבלים בשמן זית, מלח ופלפל.",
        "צולים את הירקות בתנור בחום של 200 מעלות למשך כ-25 דקות או עד להשחמה.",
        "מכינים רוטב מ-3 כפות שמן זית, מיץ לימון, דבש, מלח ופלפל.",
        "בקערה גדולה מערבבים את הקינואה, הירקות הצלויים, עלי הרוקט והנענע.",
        "יוצקים את הרוטב ומערבבים היטב.",
        "מפזרים אגוזי מלך מעל ומגישים."
      ],
      "preparationTime": 20,
      "cookingTime": 40,
      "servings": 6,
      "imageUrl": "https://example.com/quinoa-salad.jpg",
      "difficulty": "Medium",
      "categories": {
        "mainCategory": "Fur",
        "subCategory": "Dishes"
      },
      "description": "סלט קינואה צבעוני ומזין עם ירקות צלויים, מנה מושלמת לארוחה קלה ובריאה.",
      "favorites": true
    }
  ]

// פונקציה להוספת המתכונים
async function addRecipes() {
  try {
    // התחברות למונגו
    await mongoose.connect(process.env.MONGO_URL, {
      useNewUrlParser: true,
      useUnifiedTopology: true
    });
    
    // אופציה 1: הוספה של כל המתכונים בבת אחת
    const result = await Recipe.insertMany(recipesData);
    console.log(`הוספו ${result.length} מתכונים בהצלחה`);
    

  } catch (error) {
    console.error('שגיאה בהוספת המתכונים:', error);
  } finally {
    await mongoose.connection.close();
  }
}

// הפעלת הפונקציה
addRecipes();